generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model person {
    id         String      @id @default(uuid())
    name       String
    email      String      @unique
    password   String
    role       Role        @default(BASIC)
    createdAt  DateTime    @default(now())
    updatedAt  DateTime    @updatedAt
    gender     String      @default("male")
    posts      post[]
    preference preference?

    @@index([email])
}

model preference {
    id       String  @id @default(uuid())
    cookie   Boolean
    person   person  @relation(fields: [personId], references: [id])
    personId String  @unique
}

model post {
    id         String     @id @default(uuid())
    title      String
    rating     Float
    createdAt  DateTime   @default(now())
    updatedAt  DateTime   @updatedAt
    author     person     @relation(fields: [authorId], references: [id])
    authorId   String
    categories category[]
}

model category {
    id    String @id @default(uuid())
    posts post[]
}

enum Role {
    BASIC
    ADMIN
}
